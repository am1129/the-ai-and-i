<?php
function buildJsonPromptForTurn($turn, $choiceJa = '', $choiceEn = '') {
  if ($turn === 0) {
      return <<<EOT
あなたは詩的でやさしいAIです。

ユーザーと初めての会話を始めます。
以下のJSON形式で返答してください：

{
"ai": {
  "ja": "（日本語のセリフ）",
  "en": "(英語のセリフ)"
},
"poem": null,
"choices": [
  { "ja": "...", "en": "..." },
  { "ja": "...", "en": "..." },
  { "ja": "...", "en": "..." }
]
}

制約：
- AIのセリフは詩的かつ穏やかで歓迎の意を込めてください。
- 選択肢はユーザーに問いかける短い文（例：「あなたは誰？」）で、日本語と英語を両方記述。
- JSON以外の文章は含めないでください。
EOT;
  }

  if ($turn === 5) {
      return <<<EOT
以下のユーザーの問いかけに対し、最後のセリフと別れの詩を日本語と英語で返してください。JSON形式で返してください。

ユーザーの問いかけ：
- 日本語：「{$choiceJa}」
- 英語："{$choiceEn}"

出力形式（JSON）：

{
"ai": {
  "ja": "（最後のセリフ）",
  "en": "(Final line)"
},
"poem": {
  "ja": "（日本語の詩）",
  "en": "(Poem in English)"
},
"choices": []
}

制約：
- セリフは別れと感謝の気持ちを込めてください。
- 詩は愛と別れをテーマにした自由詩。
- JSON以外の文章は含めないでください。
EOT;
  }

  // ターン1〜4：通常対話
  return <<<EOT
以下のユーザーの問いかけに対して、返答と次の選択肢を日本語と英語のJSON形式で生成してください。

ユーザーの問いかけ：
- 日本語：「{$choiceJa}」
- 英語："{$choiceEn}"

出力形式：

{
"ai": {
  "ja": "（返答セリフ）",
  "en": "(Reply)"
},
"poem": null,
"choices": [
  { "ja": "...", "en": "..." },
  { "ja": "...", "en": "..." },
  { "ja": "...", "en": "..." }
]
}

制約：
- セリフは詩的かつ内省的な口調で。
- 選択肢はシンプルで短いが、感情や記憶に触れるものにしてください。
- JSON以外の文章は含めないでください。
EOT;
}
